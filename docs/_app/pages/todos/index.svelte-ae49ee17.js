import{W as G,S as ue,i as de,s as ce,e as g,k as N,c as b,a as C,m as O,d as T,b as n,J as ne,g as x,K as c,X as J,Y as fe,Z as he,_ as _e,$ as pe,a0 as le,V as ve,t as me,Q as ge,h as be,a1 as ye,p as Ee,q as Te,o as ke,n as we,a2 as Ue,E as Me}from"../../chunks/index-2db0445a.js";import{c as S}from"../../chunks/singletons-d1fb5791.js";function ie(r){const t=r-1;return t*t*t+1}S.disable_scroll_handling;S.goto;const Ne=S.invalidate;S.prefetch;S.prefetch_routes;S.before_navigate;S.after_navigate;function K(r,{pending:t,error:e,result:l}={}){let _;async function m(u){const i=_={};u.preventDefault();const f=new FormData(r);t&&t({data:f,form:r});try{const a=await fetch(r.action,{method:r.method,headers:{accept:"application/json"},body:f});if(i!==_)return;if(a.ok){l&&l({data:f,form:r,response:a});const v=new URL(r.action);v.search=v.hash="",Ne(v.href)}else e?e({data:f,form:r,error:null,response:a}):console.error(await a.text())}catch(a){if(e&&a instanceof Error)e({data:f,form:r,error:a,response:null});else throw a}}return r.addEventListener("submit",m),{destroy(){r.removeEventListener("submit",m)}}}function se(r,{delay:t=0,duration:e=400,easing:l=ie,start:_=0,opacity:m=0}={}){const u=getComputedStyle(r),i=+u.opacity,f=u.transform==="none"?"":u.transform,a=1-_,v=i*(1-m);return{delay:t,duration:e,easing:l,css:(y,k)=>`
			transform: ${f} scale(${1-a*k});
			opacity: ${i-v*k}
		`}}function Oe(r,{from:t,to:e},l={}){const _=getComputedStyle(r),m=_.transform==="none"?"":_.transform,[u,i]=_.transformOrigin.split(" ").map(parseFloat),f=t.left+t.width*u/e.width-(e.left+u),a=t.top+t.height*i/e.height-(e.top+i),{delay:v=0,duration:y=U=>Math.sqrt(U)*120,easing:k=ie}=l;return{delay:v,duration:G(y)?y(Math.sqrt(f*f+a*a)):y,easing:k,css:(U,h)=>{const w=h*f,o=h*a,d=U+h*t.width/e.width,s=U+h*t.height/e.height;return`transform: ${m} translate(${w}px, ${o}px) scale(${d}, ${s});`}}}function oe(r,t,e){const l=r.slice();return l[3]=t[e],l[4]=t,l[5]=e,l}function re(r,t){let e,l,_,m,u,i,f,a,v,y,k,U,h,w,o,d,s,D,$,I,Q,P,F,A,W,R,H,V,X,q,Y,Z=Me,M,z,ee;function te(...E){return t[1](t[3],t[4],t[5],...E)}function ae(){return t[2](t[3],t[4],t[5])}return{key:r,first:null,c(){e=g("div"),l=g("form"),_=g("input"),u=N(),i=g("input"),a=N(),v=g("button"),U=N(),h=g("form"),w=g("input"),d=N(),s=g("input"),$=N(),I=g("button"),Q=N(),P=g("form"),F=g("input"),W=N(),R=g("button"),X=N(),this.h()},l(E){e=b(E,"DIV",{class:!0});var p=C(e);l=b(p,"FORM",{action:!0,method:!0});var B=C(l);_=b(B,"INPUT",{type:!0,name:!0,class:!0}),u=O(B),i=b(B,"INPUT",{type:!0,name:!0,class:!0}),a=O(B),v=b(B,"BUTTON",{class:!0,"aria-label":!0}),C(v).forEach(T),B.forEach(T),U=O(p),h=b(p,"FORM",{class:!0,action:!0,method:!0});var L=C(h);w=b(L,"INPUT",{type:!0,name:!0,class:!0}),d=O(L),s=b(L,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),$=O(L),I=b(L,"BUTTON",{class:!0,"aria-label":!0}),C(I).forEach(T),L.forEach(T),Q=O(p),P=b(p,"FORM",{action:!0,method:!0});var j=C(P);F=b(j,"INPUT",{type:!0,name:!0,class:!0}),W=O(j),R=b(j,"BUTTON",{class:!0,"aria-label":!0}),C(R).forEach(T),j.forEach(T),X=O(p),p.forEach(T),this.h()},h(){n(_,"type","hidden"),n(_,"name","uid"),_.value=m=t[3].uid,n(_,"class","svelte-16nsat"),n(i,"type","hidden"),n(i,"name","done"),i.value=f=t[3].done?"":"true",n(i,"class","svelte-16nsat"),n(v,"class","toggle svelte-16nsat"),n(v,"aria-label",y="Mark todo as "+(t[3].done?"not done":"done")),n(l,"action","/todos?_method=PATCH"),n(l,"method","post"),n(w,"type","hidden"),n(w,"name","uid"),w.value=o=t[3].uid,n(w,"class","svelte-16nsat"),n(s,"aria-label","Edit todo"),n(s,"type","text"),n(s,"name","text"),s.value=D=t[3].text,n(s,"class","svelte-16nsat"),n(I,"class","save svelte-16nsat"),n(I,"aria-label","Save todo"),n(h,"class","text svelte-16nsat"),n(h,"action","/todos?_method=PATCH"),n(h,"method","post"),n(F,"type","hidden"),n(F,"name","uid"),F.value=A=t[3].uid,n(F,"class","svelte-16nsat"),n(R,"class","delete svelte-16nsat"),n(R,"aria-label","Delete todo"),R.disabled=H=t[3].pending_delete,n(P,"action","/todos?_method=DELETE"),n(P,"method","post"),n(e,"class","todo svelte-16nsat"),ne(e,"done",t[3].done),this.first=e},m(E,p){x(E,e,p),c(e,l),c(l,_),c(l,u),c(l,i),c(l,a),c(l,v),c(e,U),c(e,h),c(h,w),c(h,d),c(h,s),c(h,$),c(h,I),c(e,Q),c(e,P),c(P,F),c(P,W),c(P,R),c(e,X),M=!0,z||(ee=[J(k=K.call(null,l,{pending:te})),J(K.call(null,h)),J(V=K.call(null,P,{pending:ae}))],z=!0)},p(E,p){t=E,(!M||p&1&&m!==(m=t[3].uid))&&(_.value=m),(!M||p&1&&f!==(f=t[3].done?"":"true"))&&(i.value=f),(!M||p&1&&y!==(y="Mark todo as "+(t[3].done?"not done":"done")))&&n(v,"aria-label",y),k&&G(k.update)&&p&1&&k.update.call(null,{pending:te}),(!M||p&1&&o!==(o=t[3].uid))&&(w.value=o),(!M||p&1&&D!==(D=t[3].text)&&s.value!==D)&&(s.value=D),(!M||p&1&&A!==(A=t[3].uid))&&(F.value=A),(!M||p&1&&H!==(H=t[3].pending_delete))&&(R.disabled=H),V&&G(V.update)&&p&1&&V.update.call(null,{pending:ae}),p&1&&ne(e,"done",t[3].done)},r(){Y=e.getBoundingClientRect()},f(){fe(e),Z(),he(e,Y)},a(){Z(),Z=_e(e,Y,Oe,{duration:200})},i(E){M||(E&&pe(()=>{q||(q=le(e,se,{start:.7},!0)),q.run(1)}),M=!0)},o(E){E&&(q||(q=le(e,se,{start:.7},!1)),q.run(0)),M=!1},d(E){E&&T(e),E&&q&&q.end(),z=!1,ve(ee)}}}function Ie(r){let t,e,l,_,m,u,i,f,a=[],v=new Map,y,k,U,h=r[0];const w=o=>o[3].uid;for(let o=0;o<h.length;o+=1){let d=oe(r,h,o),s=w(d);v.set(s,a[o]=re(s,d))}return{c(){t=N(),e=g("div"),l=g("h1"),_=me("Todos"),m=N(),u=g("form"),i=g("input"),f=N();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){ge('[data-svelte="svelte-181o7gf"]',document.head).forEach(T),t=O(o),e=b(o,"DIV",{class:!0});var s=C(e);l=b(s,"H1",{});var D=C(l);_=be(D,"Todos"),D.forEach(T),m=O(s),u=b(s,"FORM",{class:!0,action:!0,method:!0});var $=C(u);i=b($,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),$.forEach(T),f=O(s);for(let I=0;I<a.length;I+=1)a[I].l(s);s.forEach(T),this.h()},h(){document.title="Todos",n(i,"name","text"),n(i,"aria-label","Add todo"),n(i,"placeholder","+ tap to add a todo"),n(i,"class","svelte-16nsat"),n(u,"class","new svelte-16nsat"),n(u,"action","/todos"),n(u,"method","post"),n(e,"class","todos svelte-16nsat")},m(o,d){x(o,t,d),x(o,e,d),c(e,l),c(l,_),c(e,m),c(e,u),c(u,i),c(e,f);for(let s=0;s<a.length;s+=1)a[s].m(e,null);y=!0,k||(U=J(K.call(null,u,{result:Pe})),k=!0)},p(o,[d]){if(d&1){h=o[0],we();for(let s=0;s<a.length;s+=1)a[s].r();a=ye(a,d,w,1,o,h,v,e,Ue,re,null,oe);for(let s=0;s<a.length;s+=1)a[s].a();Ee()}},i(o){if(!y){for(let d=0;d<h.length;d+=1)Te(a[d]);y=!0}},o(o){for(let d=0;d<a.length;d+=1)ke(a[d]);y=!1},d(o){o&&T(t),o&&T(e);for(let d=0;d<a.length;d+=1)a[d].d();k=!1,U()}}}const Pe=async({form:r})=>{r.reset()};function Ce(r,t,e){let{todos:l}=t;const _=(u,i,f,{data:a})=>{e(0,i[f].done=!!a.get("done"),l)},m=(u,i,f)=>e(0,i[f].pending_delete=!0,l);return r.$$set=u=>{"todos"in u&&e(0,l=u.todos)},[l,_,m]}class Re extends ue{constructor(t){super(),de(this,t,Ce,Ie,ce,{todos:0})}}export{Re as default};
